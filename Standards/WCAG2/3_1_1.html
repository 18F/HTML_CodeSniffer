
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">

<head>

<title>Success Criterion 3.1.1: Language of Page - WCAG 2.0 Standard - HTML_CodeSniffer</title>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<link href="../../css/home.css" rel="stylesheet" type="text/css">
<link rel="Shortcut Icon" href="../../images/favicon.png">

<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-359178-16']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>

<style type="text/css">
/* Needed until an inside.css is built */
#introduction li, #introduction li:hover {
  background: transparent;
  border: none;
  border-radius: none;
  box-shadow: none;
  color: inherit;
  display: list-item;
  font-size: inherit;
  font-weight: normal;
  margin-top: inherit;
  text-shadow: inherit;
}

#introduction li a {
  color: #174b91;
  display: inline;
  padding: 0;
}

#test-area td p:first-child, #test-area td ul:first-child {
  margin-top: 0;
}

#test-area td ul {
  padding-left: 13px;
}
</style>

</head>

<body>

    <div id="header">

        <div class="max-width">

            <h1>HTML_CodeSniffer</h1>

            <map name="External Links">

            <ul id="sprites">
                <li><a href="http://squiz.com.au" class="header-sprite squiz-logo"><span class="screen-hide">Squiz</span></a></li>
                <li><a href="https://github.com/squizlabs/HTML_CodeSniffer" class="header-sprite github-logo"><span class="screen-hide">HTML_CodeSniffer on GitHub</span></a></li>
                <li><a href="http://twitter.com/htmlcs" class="header-sprite twitter-logo"><span class="screen-hide">Follow us on Twitter</span></a></li>
            </ul>

            </map>

        </div>

    </div>

    <div id="introduction" style="min-height: 0px">

        <div class="max-width">

            <h2>Success Criterion 3.1.1: Language of Page (Level <abbr title="Single A">A</abbr>)</h2>

            <p>The default human language of each Web page can be programmatically determined.</p>


            <p>(From <em>Understanding WCAG 2.0</em>: <a href="http://www.w3.org/TR/UNDERSTANDING-WCAG20/meaning-doc-lang-id.html">Understanding Success Criterion 3.1.1</a>)</p>

            

        </div>

        <div class="zigzag">

        </div>

    </div>

    <div id="test-area">

        <div class="max-width">

                <h3>Discussion</h3><h4 class="grey-heading">On the lang attribute</h4>

<p>The effective language attribute - on the html element or otherwise - is different depending on whether the page is rendered as HTML or as XHTML:</p>

<ul>
<li>in HTML, the attribute is called "lang";</li>
<li>in XHTML, the attribute is "xml:lang", as per the XML specification (and the latter is mandatory for XHTML).</li>
</ul>

<p>The ability to test for the correct attribute, based on document type, is hampered by two factors:</p>

<ul>
<li>On IE, there is no ability to specifically access the doctype through javascript - through document.doctype - except in IE9 Standards Mode;</li>
<li>The mess that is serving XHTML 1.0 as the content type text/html (instead of serving as application/xhtml+xml), and what it would actually be parsed as by a browser DOM.</li>
</ul>

<p>Therefore, our automated testing can be limited to the following:</p>

<ul>
<li>That at least one of "lang" or "xml:lang" is used. (That the correct one(s) exist is up to the tester as a manual check.)</li>
<li>If both are specified, that they don't conflict with each other (they must be the same when compared case-insensitively).</li>
<li>That they conform to the correct format for language tags (eg. "en"; "en-AU"), as per the <a href="http://www.rfc-editor.org/rfc/bcp/bcp47.txt">IETF's Best Common Practices #47 document</a> (currently incorporating RFC 5646 "Tags for Identifying Languages", and RFC 4647 "Matching of Language Tags").</li>
</ul>

<p>In the case of HTML 5, a W3C Editor's Draft exists referring to a concept called <a href="http://www.w3.org/TR/html-polyglot/" title="Polyglot Markup: HTML-Compatible XHTML Documents">"Polyglot Markup"</a>, which is a method of ensuring that XHTML 5 documents can work properly when interpreted as HTML-serialised documents - which is intended to happen with an XHTML document is sent with the content type text/html. Polyglot markup suggests using both lang and xml:lang with identical (case-insensitive) values, as each appropriate value will be considered a valid but benign attribute in the other serialisation.
XHTML 1.0 also states that both are acceptable in its <a href="http://www.w3.org/TR/xhtml1/guidelines.html" title="XHTML 1.0 (Second Edition) - Appendix C: HTML Compatibility Guidelines">HTML Compatibility Guidelines appendix</a>. However, HTML 4 markup is not valid when xml:lang exists.</p>

<h4 class="grey-heading">On language tags</h4>

<p>The IETF's BCP 47 document (linked above) defines the format of a valid language tag. It contains the following subtags <strong>in this order, joined by hyphens (-)</strong>:</p>

<blockquote>
  <ul>
  <li><strong>language</strong> (required): 2-8 alpha characters (2-3 common), lower case</li>
  <li><strong>extlang</strong> (optional, repeatable up to 3 times): 3 alpha characters, lower case. Technically part of the language subtag. Most deprecated in favour of their own 3-character language subtag.</li>
  <li><strong>script</strong> (optional): 4 alpha characters, title case</li>
  <li><strong>region</strong> (optional): 2 alpha characters (for a country, typically), upper case) or a 3-digit number (for a region)</li>
  <li><strong>variant</strong> (optional, repeatable):  5-8 alphanumeric characters, OR one digit followed by three alphanumeric characters</li>
  <li><strong>extension</strong> (optional, repeatable): format "code-value*"
  
  <ul>
  <li>Code is a single alphanumeric character, except "x".</li>
  <li><a href="http://www.iana.org/assignments/language-tag-extensions-registry">Only one extension is currently registered</a>: "u" for Unicode extensions.</li>
  <li>One or more values can be specified (hyphen between them): 2-8 alphanumeric characters.</li>
  <li>Where multiple extensions are used, canonical ordering is by alphabetical order of their extension letter.</li>
  </ul></li>
  <li><strong>privateuse</strong> (optional): format "x-value*"
  
  <ul>
  <li>the "x" is invariant</li>
  <li>One or more values can be specified (hyphen between them): 1-8 alphanumeric characters.</li>
  </ul></li>
  </ul>
  
  <p>Case is insensitive throughout, but the above states how they <em>should</em> be written for consistency and canonicalisation purposes.</p>
  
  <p>A <strong>privateuse</strong> section can replace an entire language tag, as can a set of grandfathered tags.</p>
  
  <p>Where "repeatable" does not appear, a subtag can only be used once.</p>
</blockquote>

<p><em>Note:</em> Some assistive technologies do not recognise regional differences beyond the primary <strong>language</strong> subtag, or only handle a limited subset of them. For instance, a screen reader could theoretically come with several accents for English - for instance, United States, United Kingdom, Australia, and so on - but only a generic one for Spanish. In the first case, country may be recognised (eg. "en-US" vs. "en-GB"); in the latter, everything after the initial "es" language tag may be ignored.</p>

<p>The <a href="http://www.iana.org/assignments/language-subtag-registry">language subtag registry</a> is administered by IANA, and is populated primarily through various ISO standard sources, such as ISO 639 (language codes) and ISO 3166 (country codes). HTML&#95;CodeSniffer does not check for validity against this list, but does check for well-formedness.</p>

<h4 class="grey-heading">On server-side techniques</h4>

<p>One advisory technique provided is implemented server-side: <a href="http://www.w3.org/TR/WCAG20-TECHS/SVR5">SVR5: Specifying the default language in the HTTP header</a>. This suggests to use the <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.12">Content-Language HTTP header</a> to identify the default language for a web page.</p>

<p>Its main usage is to aid in content negotiation with the user agent (presuming correctly-set headers), to serve a version of the content in the appropriate language.</p>

<p>However, Content-Language cannot be used on its own, hence this is only an advisory technique. A Web page should be able to be parsed to determine its language without having to be served, hence should not rely on HTTP headers for determination of its language. Also, Content-Language supports multiple primary languages when a page is intended for multiple language audiences - this is not possible using the lang attribute.</p>

<p>RFC2616 gives an example for a page on New Zealand's Treaty of Waitangi, when presented in English and Maori simultaneously, could use both "en" (or "en-NZ") and "mi" in the Content-Language tag. When marking such a page with the "lang" tag, the primary language of the whole page - also taking into account navigational elements and the like - should be specified in the html element. Parts of the page in the non-dominant language should then be marked, by following <a href="/3_1_2">Success Criterion 3.1.2 (Language of Parts)</a> and using the lang attribute.</p>


                <h3>Sniff Coverage</h3>

                <p>Note that "[Standard]" will be replaced with "WCAG2A", "WCAG2AA" or "WCAG2AAA", depending on the level being tested.</p>

                <h4 class="grey-heading">Errors</h4><table>
<colgroup>
<col width="42%">
<col width="42%">
<col width="16%">
</colgroup>
<tbody>
<tr>
<th id="name_3_1_1">Message Name</th>
<th id="applies_3_1_1">Applies To</th>
<th id="tech_3_1_1">Techniques</th>
</tr>

<tr class="">
<td id="3_1_1_0_name" headers="name_3_1_1 sc3_1_1">
<p>The html element should have a lang or xml:lang attribute which describes the language of the document.</p>
<div class="fullcode">[Standard].Principle3.Guideline3_1.3_1_1.H57.2</div></td>
<td id="3_1_1_0_applies" headers="applies_3_1_1 sc3_1_1">
<p>HTML element with no language attributes. The primary language of the page must be specified in the document, so it can be examined in an environment outside of a server.</p>
</td>
<td id="3_1_1_0_tech" headers="tech_3_1_1 sc3_1_1">
<ul>
<li><a href="http://www.w3.org/TR/WCAG20-TECHS/H57">H57</a></li>
</ul>
</td>
</tr>

<tr class="">
<td id="3_1_1_1_name" headers="name_3_1_1 sc3_1_1">
<p>The language specified in the lang attribute of the document element does not appear to be well-formed.</p>
<div class="fullcode">[Standard].Principle3.Guideline3_1.3_1_1.H57.3.Lang</div></td>
<td id="3_1_1_1_applies" headers="applies_3_1_1 sc3_1_1">
<p>HTML element with a lang attribute (as used in HTML 4 and 5, including "polyglot" versions thereof) that is not well-formed.</p>
</td>
<td id="3_1_1_1_tech" headers="tech_3_1_1 sc3_1_1">
<ul>
<li><a href="http://www.w3.org/TR/WCAG20-TECHS/H57">H57</a></li>
</ul>
</td>
</tr>

<tr class="">
<td id="3_1_1_2_name" headers="name_3_1_1 sc3_1_1">
<p>The language specified in the xml:lang attribute of the document element does not appear to be well-formed.</p>
<div class="fullcode">[Standard].Principle3.Guideline3_1.3_1_1.H57.3.XmlLang</div></td>
<td id="3_1_1_2_applies" headers="applies_3_1_1 sc3_1_1">
<p>HTML element with an xml:lang attribute (as used by XHTML) that is not well-formed.</p>
</td>
<td id="3_1_1_2_tech" headers="tech_3_1_1 sc3_1_1">
<ul>
<li><a href="http://www.w3.org/TR/WCAG20-TECHS/H57">H57</a></li>
</ul>
</td>
</tr>

</tbody></table>

                

                

        </div> <!-- end max-width -->


    </div> <!-- end introduction -->

    <div id="footer">
    </div>

</body>
</html>
