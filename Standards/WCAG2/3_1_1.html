<html>
<head>
<title>WCAG 2.0 Success Criterion 3.1.1 - HTML_CodeSniffer</title>
<style type="text/css">
h1 {border-bottom: 5px solid #56a8f9; background-color: #333; color: white; padding: 15px 10px; margin: -10px -10px 10px -10px}
body {padding: 10px; margin: 0}
body, th, td {font: 10.5pt 'verdana', sans-serif}
table h4 {margin: 0; padding:0.2em 0; background-color: #eef}
table p {margin: 0; margin-top: 0;}
table h4 + p, p + p {margin-top: 0.5em;}
table {width: 100%; background-color: #ccc}
table td {background-color: #fff; vertical-align: top; border-collapse: collapse; padding: 5px; margin: 1px}
table th {background-color: #ddd; font-weight: bold; border-collapse: collapse; padding: 5px; margin: 1px}
table tr.na td.dimOnNa {background-color: #f5f5f5; color: #999; text-decoration: line-through;}
table td.assertType {font-weight: bold;}
table tr.error td.assertType {background-color: #c00; color: white;}
table tr.warning td.assertType {background-color: #ff0; color: black;}
table tr.notice td.assertType {background-color: #666; color: white;}
div.edsnote {background-color: #ffd; border: 1px solid #dd0; margin: 5px; padding: 5px; line-height: 1.5em}
div.subhead {font-size: 1.2em; line-height: 1.5em; background-color: #eee; color: #333; border-bottom: 2px solid #666; padding: 15px 20px; margin: -10px -10px 10px -10px}
div.fullcode {font-size: 0.85em; font-style: italic; background-color: #f8f8f8; color: #333; margin: 5px 0px; padding: 5px 0px}
.na div.fullcode {color: inherit; background-color: inherit}
blockquote {border-left: 5px solid #99c; background-color: #f8f8ff; padding: 5px 0 5px 10px}
</style>
</head>
<body>
<h1>WCAG 2.0 Success Criterion 3.1.1: Language of Page (Level <abbr title="Single A">A</abbr>)</h1>
<div class="subhead">
<p>Back to: <a href="../../">Home</a> - <a href="./AAA">Level AAA Summary</a> - <a href="./AA">Level AA Summary</a> - <a href="./A">Level A Summary</a></p>

<h2>Definition</h2>
<p>The default human language of each Web page can be programmatically determined.</p>
<p><em>More discussion from W3C:</em> <strong><a href="http://www.w3.org/TR/UNDERSTANDING-WCAG20/meaning-doc-lang-id.html">Understanding Success Criterion 3.1.1</a></strong></p>
</div>
<h2>On the lang attribute</h2>

<p>The effective language attribute - on the html element or otherwise - is different depending on whether the page is rendered as HTML or as XHTML:</p>

<ul>
<li>in HTML, the attribute is called "lang";</li>
<li>in XHTML, the attribute is "xml:lang", as per the XML specification (and the latter is mandatory for XHTML).</li>
</ul>

<p>The ability to test for the correct attribute, based on document type, is hampered by two factors:</p>

<ul>
<li>On IE, there is no ability to specifically access the doctype through javascript - through document.doctype - except in IE9 Standards Mode;</li>
<li>The mess that is serving XHTML 1.0 as the content type text/html (instead of serving as application/xhtml+xml), and what it would actually be parsed as by a browser DOM.</li>
</ul>

<p>Therefore, our automated testing can be limited to the following:</p>

<ul>
<li>That at least one of "lang" or "xml:lang" is used. (That the correct one(s) exist is up to the tester as a manual check.)</li>
<li>If both are specified, that they don't conflict with each other (they must be the same when compared case-insensitively).</li>
<li>That they conform to the correct format for language tags (eg. "en"; "en-AU"), as per the <a href="http://www.rfc-editor.org/rfc/bcp/bcp47.txt">IETF's Best Common Practices #47 document</a> (currently incorporating RFC 5646 "Tags for Identifying Languages", and RFC 4647 "Matching of Language Tags").</li>
</ul>

<p>In the case of HTML 5, a W3C Editor's Draft exists referring to a concept called <a href="http://www.w3.org/TR/html-polyglot/" title="Polyglot Markup: HTML-Compatible XHTML Documents">"Polyglot Markup"</a>, which is a method of ensuring that XHTML 5 documents can work properly when interpreted as HTML-serialised documents - which is intended to happen with an XHTML document is sent with the content type text/html. Polyglot markup suggests using both lang and xml:lang with identical (case-insensitive) values, as each appropriate value will be considered a valid but benign attribute in the other serialisation.
XHTML 1.0 also states that both are acceptable in its <a href="http://www.w3.org/TR/xhtml1/guidelines.html" title="XHTML 1.0 (Second Edition) - Appendix C: HTML Compatibility Guidelines">HTML Compatibility Guidelines appendix</a>. However, HTML 4 markup is not valid when xml:lang exists.</p>

<h2>On language tags</h2>

<p>The IETF's BCP 47 document (linked above) defines the format of a valid language tag. It contains the following subtags <strong>in this order, joined by hyphens (-)</strong>:</p>

<blockquote>
  <ul>
  <li><strong>language</strong> (required): 2-8 alpha characters (2-3 common), lower case</li>
  <li><strong>extlang</strong> (optional, repeatable up to 3 times): 3 alpha characters, lower case. Technically part of the language subtag. Most deprecated in favour of their own 3-character language subtag.</li>
  <li><strong>script</strong> (optional): 4 alpha characters, title case</li>
  <li><strong>region</strong> (optional): 2 alpha characters (for a country, typically), upper case) or a 3-digit number (for a region)</li>
  <li><strong>variant</strong> (optional, repeatable):  5-8 alphanumeric characters, OR one digit followed by three alphanumeric characters</li>
  <li><strong>extension</strong> (optional, repeatable): format "code-value*"
  
  <ul>
  <li>Code is a single alphanumeric character, except "x".</li>
  <li><a href="http://www.iana.org/assignments/language-tag-extensions-registry">Only one extension is currently registered</a>: "u" for Unicode extensions.</li>
  <li>One or more values can be specified (hyphen between them): 2-8 alphanumeric characters.</li>
  <li>Where multiple extensions are used, canonical ordering is by alphabetical order of their extension letter.</li>
  </ul></li>
  <li><strong>privateuse</strong> (optional): format "x-value*"
  
  <ul>
  <li>the "x" is invariant</li>
  <li>One or more values can be specified (hyphen between them): 1-8 alphanumeric characters.</li>
  </ul></li>
  </ul>
  
  <p>Case is insensitive throughout, but the above states how they <em>should</em> be written for consistency and canonicalisation purposes.</p>
  
  <p>A <strong>privateuse</strong> section can replace an entire language tag, as can a set of grandfathered tags.</p>
  
  <p>Where "repeatable" does not appear, a subtag can only be used once.</p>
</blockquote>

<p><em>Note:</em> Some assistive technologies do not recognise regional differences beyond the primary <strong>language</strong> subtag, or only handle a limited subset of them. For instance, a screen reader could theoretically come with several accents for English - for instance, United States, United Kingdom, Australia, and so on - but only a generic one for Spanish. In the first case, country may be recognised (eg. "en-US" vs. "en-GB"); in the latter, everything after the initial "es" language tag may be ignored.</p>

<p>The <a href="http://www.iana.org/assignments/language-subtag-registry">language subtag registry</a> is administered by IANA, and is populated primarily through various ISO standard sources, such as ISO 639 (language codes) and ISO 3166 (country codes). HTML&#95;CodeSniffer does not check for validity against this list, but does check for well-formedness.</p>

<h2>On server-side techniques</h2>

<p>One advisory technique provided is implemented server-side: <a href="http://www.w3.org/TR/2010/NOTE-WCAG20-TECHS-20101014/SVR5">SVR5: Specifying the default language in the HTTP header</a>. This suggests to use the <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.12">Content-Language HTTP header</a> to identify the default language for a web page.</p>

<p>Its main usage is to aid in content negotiation with the user agent (presuming correctly-set headers), to serve a version of the content in the appropriate language.</p>

<p>However, Content-Language cannot be used on its own, hence this is only an advisory technique. A Web page should be able to be parsed to determine its language without having to be served, hence should not rely on HTTP headers for determination of its language. Also, Content-Language supports multiple primary languages when a page is intended for multiple language audiences - this is not possible using the lang attribute.</p>

<p>RFC2616 gives an example for a page on New Zealand's Treaty of Waitangi, when presented in English and Maori simultaneously, could use both "en" (or "en-NZ") and "mi" in the Content-Language tag. When marking such a page with the "lang" tag, the primary language of the whole page - also taking into account navigational elements and the like - should be specified in the html element. Parts of the page in the non-dominant language should then be marked, by following <a href="/3_1_2">Success Criterion 3.1.2 (Language of Parts)</a> and using the lang attribute.</p>
<h2>Messages emitted by this Success Criterion's tests</h2>

<p>Note that "[Standard]" will be replaced with "WCAG2A", "WCAG2AA" or "WCAG2AAA", depending on the level being tested.</p>
<table>
<colgroup>
<col width="6%">
<col width="35%">
<col width="12%">
<col width="12%">
<col width="35%">
</colgroup>
<tbody>
<tr>
<th id="type">Type</th>
<th id="name">Message Name</th>
<th id="applies">Applies To</th>
<th id="tech">Techniques</th>
<th id="ex">Examples</th>
</tr>

<tr class="error">
<td class="assertType dimOnNa" id="3_1_1_2_type" headers="type sc3_1_1">
Error</td>
<td class="dimOnNa" id="3_1_1_2_name" headers="name sc3_1_1">
<p>Ensure that any language tag used in an xml:lang attribute is well-formed according to the appropriate standard.</p>
<div class="fullcode">[Standard].Principle3.Guideline3_1.3_1_1.H57.3</div></td>
<td class="dimOnNa" id="3_1_1_2_applies" headers="applies sc3_1_1">
<p>html element</p>
</td>
<td class="dimOnNa" id="3_1_1_2_tech" headers="tech sc3_1_1">
<ul>
<li>H57.3</li>
</ul>
</td>
<td class="dimOnNa" id="3_1_1_2_examples" headers="ex sc3_1_1">
</td>
</tr>

<tr class="error">
<td class="assertType dimOnNa" id="3_1_1_1_type" headers="type sc3_1_1">
Error</td>
<td class="dimOnNa" id="3_1_1_1_name" headers="name sc3_1_1">
<p>Ensure that any language tag used in a lang attribute is well-formed according to the appropriate standard.</p>
<div class="fullcode">[Standard].Principle3.Guideline3_1.3_1_1.H57.3</div></td>
<td class="dimOnNa" id="3_1_1_1_applies" headers="applies sc3_1_1">
<p>html element</p>
</td>
<td class="dimOnNa" id="3_1_1_1_tech" headers="tech sc3_1_1">
<ul>
<li>H57.3</li>
</ul>
</td>
<td class="dimOnNa" id="3_1_1_1_examples" headers="ex sc3_1_1">
</td>
</tr>

<tr class="error">
<td class="assertType dimOnNa" id="3_1_1_0_type" headers="type sc3_1_1">
Error</td>
<td class="dimOnNa" id="3_1_1_0_name" headers="name sc3_1_1">
<p>The html element should have a lang or xml:lang attribute which describes the language of the document.</p>
<div class="fullcode">[Standard].Principle3.Guideline3_1.3_1_1.H57.2</div></td>
<td class="dimOnNa" id="3_1_1_0_applies" headers="applies sc3_1_1">
<p>html element</p>
</td>
<td class="dimOnNa" id="3_1_1_0_tech" headers="tech sc3_1_1">
<ul>
<li>H57.2</li>
</ul>
</td>
<td class="dimOnNa" id="3_1_1_0_examples" headers="ex sc3_1_1">
<ul>
<li><a href="./Eg/63">63</a></li>
</ul>
</td>
</tr>

</tbody></table></body>
</html>
